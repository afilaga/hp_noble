# HookahPlace Noble ‚Äî Booking System & Bot

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è HookahPlace Noble. –í–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è Telegram –±–æ—Ç–∞, Backend API (FastAPI) –¥–ª—è —Å–∞–π—Ç–∞ –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

**–°—Ç–∞—Ç—É—Å**: Pre-deploy (–ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é)

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, —É–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–π –≤ Docker:

| –°–µ—Ä–≤–∏—Å | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| **`noble-backend`** | **FastAPI + Python Bot** | –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –ó–∞–ø—É—Å–∫–∞–µ—Ç API (port 8000) –∏ polling Telegram –±–æ—Ç–∞. –£–ø—Ä–∞–≤–ª—è–µ—Ç –ë–î `reservations.db`. |
| **`noble-frontend`** | **React + Nginx** | –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (—Å–∞–π—Ç). –°–º. `../HookahPlace Noble Site/README.md`. |
| **`nginx`** | **Nginx** | Reverse Proxy. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ frontend (80) –∏ backend API. |

---

## ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ü§ñ Telegram –ë–æ—Ç (`@hp_noble_bot`)
–û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.

#### –î–ª—è –ì–æ—Å—Ç–µ–π:
- **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ—à–∞–≥–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–ò–º—è -> –¢–µ–ª–µ—Ñ–æ–Ω -> –î–∞—Ç–∞ -> –í—Ä–µ–º—è -> –ì–æ—Å—Ç–∏).
- **–ö–æ–Ω—Ç–∞–∫—Ç—ã**: –í—ã–≤–æ–¥ –∫–Ω–æ–ø–æ–∫ —Å –∫–∞—Ä—Ç–∞–º–∏, Instagram, WhatsApp.
- **–û—Ç–∑—ã–≤—ã**: –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–∑—ã–≤–∞ —É–ø—Ä–∞–≤–ª—è—é—â–µ–º—É.

#### –î–ª—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (`/admin`):
- **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –±—Ä–æ–Ω–∏**: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Ä–µ–∑–µ—Ä–≤–æ–≤.
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –±—Ä–æ–Ω—è—Ö (—Å —Å–∞–π—Ç–∞ –∏ –±–æ—Ç–∞) –∏ –æ—Ç–∑—ã–≤–∞—Ö.
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ CSV —Å –±–∞–∑–æ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –∏ –æ—Ç–∑—ã–≤–æ–≤.
- **–†–∞—Å—Å—ã–ª–∫–∞**: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–æ—Ç–∞.

### üîå API (Backend)
REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–µ–±-—Å–∞–π—Ç–æ–º.

- `GET /api/tables/available` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç–æ–ª–æ–≤ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
- `POST /api/reservation/create` ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∞–¥–º–∏–Ω–æ–≤ –≤ Telegram).

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –î–µ–ø–ª–æ–π

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker & Docker Compose
- –°–µ—Ä–≤–µ—Ä Linux (Ubuntu —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º)

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
–°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –ø–∞–ø–∫–µ `Booking/src/`:
```env
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
ADMIN_IDS=12345678,87654321
CORS_ORIGINS=http://localhost:5173,https://hpnoble.ru
```

### 2. –ë—ã—Å—Ç—Ä—ã–π –î–µ–ø–ª–æ–π
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (–æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥, –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã):
```bash
bash Booking/deploy/deploy.sh
```

### 3. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```bash
cd Booking
docker-compose up -d --build
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è `Booking/`

```
src/
‚îú‚îÄ‚îÄ bot.py           # –õ–æ–≥–∏–∫–∞ Telegram –±–æ—Ç–∞ (aiogram/python-telegram-bot)
‚îú‚îÄ‚îÄ api.py           # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ database.py      # –†–∞–±–æ—Ç–∞ —Å SQLite (Repositories)
‚îú‚îÄ‚îÄ reservations.db  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ .env             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
deploy/              # –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è
nginx/               # –ö–æ–Ω—Ñ–∏–≥–∏ Nginx
docker-compose.yml   # –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
```

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –î–∞–Ω–Ω—ã–µ
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±—ç–∫–∞–ø —Ñ–∞–π–ª–∞ `reservations.db`.
- **SSL**: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ certbot –≤ docker-compose.
